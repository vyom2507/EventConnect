"use strict";(()=>{var e={};e.id=1510,e.ids=[1510],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},17979:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>y,routeModule:()=>x,serverHooks:()=>q,staticGenerationAsyncStorage:()=>f});var r={};n.r(r),n.d(r,{GET:()=>p,POST:()=>m});var a=n(49303),s=n(88716),i=n(60670),o=n(87070),u=n(83493),c=n(71615),d=n(41482),l=n.n(d);async function p(){let e=await u._.announcement.findMany({orderBy:{createdAt:"desc"},include:{createdBy:{select:{fullName:!0,email:!0}}}});return o.NextResponse.json({announcements:e})}async function m(e){let t=function(){let e=c.cookies().get("student_session")?.value,t=process.env.AUTH_JWT_SECRET;if(!e||!t)return null;try{let n=l().verify(e,t);if(!n.isAdmin)return null;return n.id}catch{return null}}();if(!t)return o.NextResponse.json({error:"Admin access required"},{status:403});let{title:n,body:r}=await e.json();if(!n||!r)return o.NextResponse.json({error:"Title and body are required."},{status:400});let a=await u._.announcement.create({data:{title:n,body:r,createdById:t},include:{createdBy:{select:{fullName:!0,email:!0}}}});return o.NextResponse.json({announcement:a})}let x=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/announcements/route",pathname:"/api/admin/announcements",filename:"route",bundlePath:"app/api/admin/announcements/route"},resolvedPagePath:"C:\\Users\\vyoml\\iit-international-student-dashboard-main\\app\\api\\admin\\announcements\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:y,staticGenerationAsyncStorage:f,serverHooks:q}=x,g="/api/admin/announcements/route";function v(){return(0,i.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:f})}},83493:(e,t,n)=>{n.d(t,{_:()=>a});let r=require("@prisma/client"),a=globalThis.prisma??new r.PrismaClient({log:["error","warn"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[9276,5972,4261],()=>n(17979));module.exports=r})();