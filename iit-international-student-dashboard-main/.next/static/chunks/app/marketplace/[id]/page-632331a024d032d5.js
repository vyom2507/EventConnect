(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{5934:function(e,t,r){Promise.resolve().then(r.bind(r,5958)),Promise.resolve().then(r.bind(r,1637)),Promise.resolve().then(r.bind(r,6946)),Promise.resolve().then(r.t.bind(r,5878,23))},5958:function(e,t,r){"use strict";r.d(t,{Sidebar:function(){return p}});var s=r(7437),l=r(7648),a=r(9376),n=r(1994),i=r(5466),o=r(6381),c=r(3774),d=r(6096),u=r(5805),h=r(8736),f=r(2449),x=r(7815);let m=[{label:"Dashboard",href:"/dashboard",icon:i.Z},{label:"Pre-Arrival",href:"/pre-arrival",icon:o.Z},{label:"Campus Navigation",href:"/campus-navigation",icon:c.Z},{label:"Academic Integration",href:"/academic-integration",icon:d.Z},{label:"Social Networking",href:"/social-networking",icon:u.Z},{label:"Resource Directory",href:"/resource-directory",icon:h.Z},{label:"Marketplace",href:"/marketplace",icon:f.Z},{label:"Profile",href:"/profile",icon:x.Z}];function p(){let e=(0,a.usePathname)();return(0,s.jsxs)("aside",{className:" hidden md:flex sticky top-0 h-screen w-64 flex-shrink-0 flex-col bg-black/95 shadow-2xl ",children:[(0,s.jsxs)("div",{className:"flex h-16 items-center gap-2 px-5",children:[(0,s.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-red-600 via-red-500 to-red-400 text-white shadow-lg",children:(0,s.jsx)("span",{className:"text-lg font-bold",children:"IIT"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold tracking-tight text-slate-50",children:"IIT Intl Student Hub"}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Illinois Institute of Technology \xb7 Chicago"})]})]}),(0,s.jsx)("nav",{className:"mt-4 flex-1 space-y-1 overflow-y-auto px-3 pb-4",children:m.map(t=>{let r=t.icon,a=e===t.href||"/dashboard"!==t.href&&e.startsWith(t.href);return(0,s.jsxs)(l.default,{href:t.href,className:(0,n.Z)("group flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-medium transition-all","text-slate-200 hover:bg-red-600 hover:text-white","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500",a&&"bg-red-600 text-white shadow-lg shadow-red-900/40"),children:[(0,s.jsx)(r,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:t.label})]},t.href)})}),(0,s.jsx)("div",{className:"border-t border-slate-800 px-4 py-3",children:(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Tip: Bookmark this dashboard to access your IIT support toolkit in one click."})})]})}},1637:function(e,t,r){"use strict";r.d(t,{TopNavbar:function(){return d}});var s=r(7437),l=r(2265),a=r(7648),n=r(3145),i=r(9376),o=r(4766),c=r(875);function d(){var e,t,r;let d=(0,i.usePathname)(),[u,h]=(0,l.useState)(null),[f,x]=(0,l.useState)(!1),m=async()=>{try{let e=await fetch("/api/auth/me",{cache:"no-store"});if(!e.ok){h(null);return}let t=await e.json();h(t.student)}catch(e){console.error("Error loading session:",e),h(null)}};(0,l.useEffect)(()=>{m()},[]),(0,l.useEffect)(()=>{x(!1),m()},[d]);let p=null!==(r=null==u?void 0:null===(e=u.fullName)||void 0===e?void 0:e.split(" ")[0])&&void 0!==r?r:(null==u?void 0:u.email)?u.email.split("@")[0]:"Student";return(0,s.jsxs)("header",{className:"sticky top-0 z-30 flex h-14 items-center justify-between border-b border-red-900/40 bg-gradient-to-r from-red-700 via-red-600 to-red-800 px-3 text-sm text-white shadow-lg shadow-red-900/40 md:h-16 md:px-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-black/40 text-xs font-bold shadow-md shadow-black/40 md:h-9 md:w-9",children:(0,s.jsx)(a.default,{href:"/",className:"block rounded-lg px-3 py-2 hover:bg-slate-800/80",children:"IIT"})}),(0,s.jsxs)("div",{className:"hidden flex-col md:flex",children:[(0,s.jsx)("span",{className:"text-[11px] font-semibold uppercase tracking-[0.22em] text-red-100/90",children:"iStudentsHub"}),(0,s.jsx)("span",{className:"text-[11px] text-red-50/90",children:"Illinois Institute of Technology \xb7 International Student Dashboard"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,s.jsxs)("button",{type:"button",className:"relative inline-flex h-8 w-8 items-center justify-center rounded-full bg-red-900/40 text-red-100 hover:bg-red-900/70 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-red-700 focus-visible:ring-white/80",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"absolute -right-0.5 -top-0.5 inline-flex h-3 w-3 items-center justify-center rounded-full bg-emerald-400 text-[8px] font-semibold text-emerald-950",children:"â€¢"})]}),u?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>x(e=>!e),className:"flex items-center gap-2 rounded-full bg-black/30 px-2 py-1.5 text-[11px] font-medium shadow-md shadow-black/40 hover:bg-black/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-red-700 focus-visible:ring-white/80 md:px-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"relative h-7 w-7 overflow-hidden rounded-full bg-red-900/60 ring-1 ring-red-300/60 md:h-8 md:w-8",children:u.avatarUrl?(0,s.jsx)(n.default,{src:u.avatarUrl,alt:u.fullName,fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center text-[11px] font-semibold",children:null===(t=p[0])||void 0===t?void 0:t.toUpperCase()})}),(0,s.jsxs)("div",{className:"hidden text-left md:block",children:[(0,s.jsxs)("p",{className:"text-[11px] leading-tight",children:["Hi,"," ",(0,s.jsx)("span",{className:"font-semibold text-white",children:p})," ","\uD83D\uDC4B"]}),u.program&&(0,s.jsx)("p",{className:"text-[10px] text-red-100/80",children:u.program})]})]}),(0,s.jsx)(c.Z,{className:"h-3 w-3 transition-transform ".concat(f?"rotate-180":"")})]}),f&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-52 rounded-xl bg-slate-950/95 p-1 text-[11px] text-slate-100 shadow-xl shadow-black/70 ring-1 ring-slate-700/80",children:[(0,s.jsxs)("div",{className:"border-b border-slate-800 px-3 py-2",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold",children:u.fullName||p}),(0,s.jsx)("p",{className:"truncate text-[10px] text-slate-400",children:u.email})]}),(0,s.jsx)(a.default,{href:"/profile",className:"block rounded-lg px-3 py-2 hover:bg-slate-800/80",children:"Profile"}),(0,s.jsx)(a.default,{href:"/dashboard",className:"block rounded-lg px-3 py-2 hover:bg-slate-800/80",children:"Dashboard"}),(0,s.jsx)(a.default,{href:"/api/auth/logout",className:"block rounded-lg px-3 py-2 hover:bg-slate-800/80",children:"Logout"}),(0,s.jsx)("div",{className:"my-1 border-t border-slate-800"})]})]}):(0,s.jsx)(a.default,{href:"/login",className:"rounded-full bg-black/35 px-3 py-1.5 text-[11px] font-semibold text-red-50 shadow-sm shadow-black/40 hover:bg-black/55",children:"Login"})]})]})}},6946:function(e,t,r){"use strict";r.d(t,{PurchaseActions:function(){return i}});var s=r(7437),l=r(2265),a=r(9376),n=r(9178);function i(e){var t,r,i,o,c;let{product:d}=e,u=(0,a.useRouter)(),[h,f]=(0,l.useState)(null),[x,m]=(0,l.useState)(!1),[p,b]=(0,l.useState)(!1),[g,v]=(0,l.useState)(null),y=(null!==(o=d.paymentOptions)&&void 0!==o?o:"").split(",").map(e=>e.trim()).filter(Boolean);(0,l.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await fetch("/api/auth/me",{cache:"no-store"});if(!t.ok)return;let r=await t.json();e&&f(r.student)}catch(e){console.error(e)}})(),()=>{e=!1}},[]);let w=null!==(c=null===(t=d.owner)||void 0===t?void 0:t.id)&&void 0!==c?c:null,k=!!w&&(null==h?void 0:h.id)===w,j=async e=>{v(null),m(!0);try{let t=await fetch("/api/marketplace/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:d.id,paymentMethod:e})});if(!t.ok){let e=await t.text();throw Error(e||"Failed to create order")}let r=await t.json();if("card"===e&&r.checkoutUrl){window.location.href=r.checkoutUrl;return}if(r.conversationId){u.push("/marketplace/chat/".concat(r.conversationId)),u.refresh();return}u.push("/marketplace"),u.refresh()}catch(e){console.error(e),v(e.message||"Something went wrong")}finally{m(!1)}},N=async()=>{if(confirm("Are you sure you want to delete this listing?")){b(!0),v(null);try{let e=await fetch("/api/marketplace/products/".concat(d.id),{method:"DELETE"});if(!e.ok){let t=await e.text();throw Error(t||"Failed to delete listing")}u.push("/marketplace"),u.refresh()}catch(e){console.error(e),v(e.message||"Something went wrong")}finally{b(!1)}}},Z=(null===(r=d.owner)||void 0===r?void 0:r.fullName)&&d.owner.fullName.trim().length>0?d.owner.fullName:"IIT student",I=(null===(i=d.owner)||void 0===i?void 0:i.program)||"";return(0,s.jsxs)(n.Z,{className:"bg-white/95 text-slate-900",children:[(0,s.jsx)("h2",{className:"mb-1 text-sm font-semibold",children:"Listing details"}),(0,s.jsxs)("p",{className:"text-[11px] text-slate-600",children:["Seller:"," ",(0,s.jsx)("span",{className:"font-semibold",children:Z}),I&&" \xb7 ".concat(I)]}),g&&(0,s.jsx)("p",{className:"mt-2 rounded-lg bg-red-50 px-3 py-2 text-[11px] text-red-700 ring-1 ring-red-200",children:g}),k?(0,s.jsxs)("div",{className:"mt-3 space-y-2 text-xs",children:[(0,s.jsx)("p",{className:"text-[11px] text-slate-600",children:"You posted this listing. You can remove it once it's no longer available."}),(0,s.jsx)("button",{type:"button",onClick:N,disabled:p,className:"w-full rounded-lg bg-slate-900 px-3 py-2 text-[11px] font-semibold text-white hover:bg-black disabled:opacity-60",children:p?"Removing...":"Delete listing"})]}):d.isActive?(0,s.jsxs)("div",{className:"mt-3 space-y-2 text-xs",children:[(0,s.jsx)("p",{className:"text-[11px] text-slate-600",children:"Choose how you want to pay for this item."}),y.includes("card")&&(0,s.jsx)("button",{type:"button",onClick:()=>j("card"),disabled:x,className:"w-full rounded-lg bg-red-600 px-3 py-2 text-[11px] font-semibold text-white shadow-sm shadow-red-900/40 hover:bg-red-500 disabled:opacity-60",children:x?"Processing...":"Pay by card (demo)"}),y.includes("in_person")&&(0,s.jsx)("button",{type:"button",onClick:()=>j("in_person"),disabled:x,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-[11px] font-semibold text-slate-800 hover:bg-slate-50 disabled:opacity-60",children:x?"Reserving...":"Reserve for in-person payment"}),(0,s.jsx)("p",{className:"mt-2 text-[10px] text-slate-500",children:"For in-person payments, you and the seller should agree on a safe, public campus location (e.g., MTCC) and confirm the item before exchanging money."})]}):(0,s.jsx)("p",{className:"mt-3 text-[11px] text-slate-500",children:"This item has already been sold or reserved."})]})}},9178:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7437),l=r(1994);function a(e){let{children:t,className:r}=e;return(0,s.jsx)("div",{className:(0,l.W)("rounded-2xl border border-slate-500/90 bg-slate-200/80 p-4 shadow-lg shadow-black/40",r),children:t})}},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(2265);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...n,width:l,height:l,stroke:r,strokeWidth:o?24*Number(i)/Number(l):i,className:a("lucide",c),...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:o,...c}=r;return(0,s.createElement)(i,{ref:n,iconNode:t,className:a("lucide-".concat(l(e)),o),...c})});return r.displayName="".concat(e),r}},4766:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},875:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},7815:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},8736:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},5466:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},3774:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6381:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},6096:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]])},2449:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},5805:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3145:function(e,t,r){"use strict";r.d(t,{default:function(){return l.a}});var s=r(8461),l=r.n(s)},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return l.a}});var s=r(2972),l=r.n(s)},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},8461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return i}});let s=r(7043),l=r(5346),a=r(5878),n=s._(r(5084));function i(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=a.Image},1994:function(e,t,r){"use strict";function s(){for(var e,t,r=0,s="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=function e(t){var r,s,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(s=e(t[r]))&&(l&&(l+=" "),l+=s)}else for(s in t)t[s]&&(l&&(l+=" "),l+=s)}return l}(e))&&(s&&(s+=" "),s+=t);return s}r.d(t,{W:function(){return s}}),t.Z=s}},function(e){e.O(0,[972,878,971,117,744],function(){return e(e.s=5934)}),_N_E=e.O()}]);