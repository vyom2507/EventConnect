(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{924:function(e,t,r){Promise.resolve().then(r.bind(r,5502))},5502:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(7437),n=r(2265),a=r(9376),l=r(7648),o=r(257);let i=["Undergraduate","Graduate","Exchange","Visiting Scholar","Other"],c=o.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME,u=o.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;function d(){let e=(0,a.useRouter)(),[t,r]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[x,f]=(0,n.useState)(""),[p,h]=(0,n.useState)(""),[m,g]=(0,n.useState)(""),[b,y]=(0,n.useState)(""),[v,j]=(0,n.useState)(null),[N,w]=(0,n.useState)(null),[T,S]=(0,n.useState)(!1),[C,k]=(0,n.useState)(null),[_,P]=(0,n.useState)(!1),E=async()=>{if(!v)return null;if(!c||!u)return console.error("Missing Cloudinary env vars"),null;S(!0);try{let e=new FormData;e.append("file",v),e.append("upload_preset",u);let t=await fetch("https://api.cloudinary.com/v1_1/".concat(c,"/upload"),{method:"POST",body:e}),r=await t.json();if(!t.ok)return console.error("Cloudinary upload error:",r),k("Failed to upload profile image. Please try again."),null;return r.secure_url}catch(e){return console.error("Cloudinary upload error:",e),k("Failed to upload profile image. Please try again."),null}finally{S(!1)}},L=async r=>{if(r.preventDefault(),k(null),!t||!o||!x||!m||!b){k("Full name, email, password, student type, and program are required.");return}if(x!==p){k("Passwords do not match.");return}P(!0);try{let r=null;if(v&&!(r=await E())){P(!1);return}let s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:t,email:o,password:x,studentType:m,program:b,avatarUrl:r})}),n=await s.json();if(!s.ok)throw Error(n.error||"Registration failed.");e.push("/login")}catch(e){k(e.message||"Registration failed.")}finally{P(!1)}};return(0,s.jsxs)("div",{className:"mx-auto flex min-h-[70vh] max-w-md flex-col justify-center px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-6 text-center",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-red-600",children:"iStudentsHub \xb7 IIT"}),(0,s.jsx)("h1",{className:"mt-2 text-2xl font-semibold text-slate-900",children:"Create your student account"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:"Sign up with your IIT details so we can personalize your onboarding."})]}),(0,s.jsxs)("form",{onSubmit:L,className:"space-y-4 rounded-2xl bg-white p-5 shadow-sm shadow-slate-300/80",children:[C&&(0,s.jsx)("div",{className:"rounded-lg border border-red-300 bg-red-50 px-3 py-2 text-xs text-red-700",children:C}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Full name",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"Aisha Mensah"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["IIT email",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"email",value:o,onChange:e=>d(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"you@hawk.iit.edu"})]}),(0,s.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Password",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"password",value:x,onChange:e=>f(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"••••••••"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Confirm password",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"password",value:p,onChange:e=>h(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"••••••••"})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Student type",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",children:[(0,s.jsx)("option",{value:"",children:"Select your student type"}),i.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("label",{className:"block text-xs font-semibold text-slate-700",children:["Program / Major",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:b,onChange:e=>y(e.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500",placeholder:"M.S. Cyber Forensics & Security"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-slate-700",children:"Profile photo (optional)"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[N?(0,s.jsx)("img",{src:N,alt:"Avatar preview",className:"h-12 w-12 rounded-full object-cover ring-2 ring-red-500/60"}):(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-200 text-xs text-slate-500",children:"No photo"}),(0,s.jsxs)("div",{className:"flex-1 text-xs text-slate-600",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&(j(r),w(URL.createObjectURL(r)))},className:"block w-full text-xs text-slate-700 file:mr-3 file:rounded-md file:border-0 file:bg-red-600 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-white hover:file:bg-red-500"}),(0,s.jsx)("p",{className:"mt-1 text-[10px] text-slate-500",children:"Square images work best (e.g., 400x400). You can update this later in your profile."}),T&&(0,s.jsx)("p",{className:"mt-0.5 text-[10px] text-red-600",children:"Uploading image…"})]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:_||T,className:"flex w-full items-center justify-center rounded-lg bg-red-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm shadow-red-300 hover:bg-red-500 disabled:cursor-not-allowed disabled:bg-red-300",children:_?"Creating your account...":"Create account"}),(0,s.jsxs)("p",{className:"pt-1 text-center text-xs text-slate-600",children:["Already have an account?"," ",(0,s.jsx)(l.default,{href:"/login",className:"font-semibold text-red-600 hover:text-red-500",children:"Login"})]})]})]})}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var s=r(2972),n=r.n(s)},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},257:function(e,t,r){"use strict";var s,n;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,s,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();var i=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?i=s.concat(i):u=-1,i.length&&x())}function x(){if(!c){var e=o(d);c=!0;for(var t=i.length;t;){for(s=i,i=[];++u<t;)s&&s[u].run();u=-1,t=i.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new f(e,t)),1!==i.length||c||o(x)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},l=!0;try{t[e](a,a.exports,s),l=!1}finally{l&&delete r[e]}return a.exports}s.ab="//";var n=s(229);e.exports=n}()}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=924)}),_N_E=e.O()}]);